<section class="section">
  <div class="container">
    <div class="is-fullwidth columns is-multiline">
      <div class="column is-12">
        <h2 class="title is-5 has-text-centered"><%= @is_my_profile ? "Witaj na swoim profilu" : "Profil użytkownika #{@user.name}" %></h2>
      </div>
      <div class="column is-12">
        <%= form_with model: @user, url: profile_path, method: :patch, local: true, data: { remote: false }, html: { multipart: true } do |f| %>
          <div class="field">
            <label class="label">Avatar</label>
            <div data-controller="avatar-preview">
              <div class="mt-3" data-avatar-preview-target="preview">
                  <%= render 'shared/avatar', user: @user %>
              </div>
              <div class="file has-name">
                <label class="file-label">
                  <%= f.file_field :avatar, data: { action: "change->avatar-preview#preview", avatar_preview_target: "input" }, class: "file-input" %>

                  <span class="file-cta mt-2">
                  <span class="file-label"><%= icon_tag("pencil-square", options: { class: "menu-icon" }) %>
                    Zmień…</span>
                </span>
                </label>
              </div>

              <div class="field mt-4 is-hidden" data-avatar-preview-target="submit">
                <div class="control">
                  <%= button_tag type: "submit", class: "button is-success" do %>
                    <%= icon_tag("check-circle", options: { class: "menu-icon" }) %> Zapisz
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
      <div class="column is-12">
        <p>Liczba obecnych gier, w których bierze udział: <%= @user.plays.count %></p>
        <p>Liczba skończonych gier, w których brał udział: <%= @user.plays.done.count %> (z czego
          wygranych: <%= @user.plays.won.count %>)</p>
      </div>
    </div>
  </div>
</section>

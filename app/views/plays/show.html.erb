<%= render 'shared/plays' do %>
  <div class="columns is-variable is-0 is-multiline is-flex-direction-column-mobile" data-controller="map">
    <div class="column is-12-mobile is-6-desktop" id="map" data-src="<%= asset_path("pl.svg") %>" data-map-target="map" data-regions="<%= Play::REGIONS %>" data-game-id="<%= @play.id %>" data-active-id="<%= params[:map_id] %>" data-regions-satisfaction="<%= @play.regions_satisfaction %>" data-clickable="true">
      <h2 class="title is-5 has-text-centered mt-6">
        Zadowolenie społeczne <%= @play.social_satisfaction.round(2).to_s.gsub('.', ',') %>%
      </h2>
      <% if @play.budget_reserve >= 0 %>
        <h2 class="title is-5 has-text-centered">Rezerwa budżetowa: <%= @play.decorate.formatted_budget_reserve %></h2>
      <% else %>
        <h2 class="title is-5 has-text-centered">Zadłużenie budżetu: <span class="is-danger"><%= @play.decorate.formatted_budget_reserve %></span></h2>
      <% end %>
      <% unless params["map_id"].blank? %>
        <p class="has-text-centered">
          <%= link_to play_path(@play), class: "button is-light mt-2 mb-2" do %>
            <%= icon_tag("arrow-left", options: { class: "menu-icon" }) %> Newsy z całego kraju
          <% end %>
        </p>
      <% end %>
      <div data-map-target="wrapper"></div>
      <div id="tooltip" class="tooltip"></div>
    </div>
    <div class="column is-12-mobile is-6-desktop" style="overflow: auto;" data-map-target="newsColumn">
      <div class="mt-6 mb-2">
        <% if @region_name %>
          <p class="has-text-centered is-size-4">Wiadomości z <%= @region_name %></p>
        <% else %>
          <p class="has-text-centered is-size-4">Wiadomości z Polski</p>
        <% end %>
      </div>
      <div>
        <% @play_events.each do |play_event| %>
          <%= render 'event', play_event: play_event %>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
